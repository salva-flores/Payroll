<div class="card" id="employeesList">
	<div class="card-header p-2 align-items-center">
		<div class="d-flex justify-content-end align-items-center">
			<div class="mr-auto">Listado de empleados</div>
			<button class="btn btn-primary btn-outline btn-xs mr-1" title="Agregar empleado" ng-click="addEmployee()" data-toggle="modal" data-target="#employeeForm"><i class="fa fa-plus mr-1"></i>Nuevo</button>
			<button class="btn btn-outline-dark btn-xs mr-1" title="Refrescar lista" ng-click="loadEmployees()"><i class="fa fa-repeat"></i></button>
		</div>
	</div>
	<div class="card-body p-2">
		<table datatable="ng" class="table table-bordered table-condensed" >
			<thead>
				<tr> 
					<th>Nombre</th>
					<th>Puesto</th>
					<th><i class="fa fa-group"> </i></th>
					<th><i class="fa fa-phone"> </i></th>
					<th>@</th>
					<th>ID</th>
					<!-- <th>Estado</th> -->

				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="e in employees "> 
					<td>{{ e.firstName }}</td>
					<td>{{ showJob(e) }}</td>
					<td>{{ showUnit(e) }}</td>
					<td>{{ e.mobilePhone }}</td>
					<td>{{ e.email }}</td>
					<td>{{ e.idCard }}</td>
					<!-- <td>{{ e.idCard }}</td> -->
				</tr>
			</tbody>
		</table>
	</div>
</div>
<div class="modal fade" id="employeeForm" tabindex="-1" role="dialog" data-backdrop="static">
	<div class="modal-dialog " role="document">
		<div class="modal-content">
			<div class="modal-header p-1">
				<h6 class="modal-title" id="userFormLabel">{{accion}} empleado</h6>
				<button class="btn btn-xs" type="button" class="close" data-dismiss="modal" aria-label="Close">x</button>
			</div>
			<div class="modal-body m-2 p-0">
				<form name="frm" novalidate>
					<div class="row">
						<div class="col m-1 p-0">
							<div class="form-group m-1">
								<label class="form-control-label m-0" for="employeeName">Nombre</label>  
								<input type="text" class="form-control form-control-sm" ng-model="employee.firstName">
							</div>
							<div class="form-group m-1">
								<label class="form-control-label m-0" for="employeeLastName">Apellidos</label>  
								<input type="text" class="form-control form-control-sm" ng-model="employee.lastName">
							</div>
							<div class="form-group m-1" ng-class="{ 'has-error' : frm.email.$invalid && frm.email.$touched, 'has-success' : frm.email.$valid }">
								<label class="form-control-label m-0"  for="email">Correo</label>
								<input type="email" class="form-control form-control-sm" id="3" name="email" ng-model="employee.email" ng-pattern-restrict required>
								<small style="color:maroon; font-size:10px; font-weight:bold" ng-show="frm.email.$invalid && frm.email.$touched">Dirección inválida.</small>
							</div>
							<div class="form-group m-1" ng-class="{ 'has-error' : frm.phone.$invalid && frm.phone.$touched, 'has-success' : frm.phone.$valid }">
								<label class="form-control-label m-0"  for="phone">Teléfono</label>
								<input type="text" class="form-control form-control-sm" id="4" name="phone" minlength ="8" maxlength="8" ng-model="employee.phone" pattern="^[0-9]*$" ng-pattern-restrict required>
								<small style="color:maroon; font-size:10px; font-weight:bold" ng-show="frm.phone.$invalid && frm.phone.$touched">Número telefónico inválido.</small>
							</div>
							<div class="form-group m-1" ng-class="{ 'has-error' : frm.unit.$invalid && frm.unit.$touched, 'has-success' : frm.unit.$valid }">
								<label class="form-control-label m-0"  for="unit">Departamento</label>
								<select class="form-control form-control-sm" name="unit" ng-model="employee.unit" ng-options="d.id as d.name for d in units" required>
									<option value="">-- Seleccione un Departamento --</option>
								</select>
								<small style="color:maroon; font-size:10px; font-weight:bold" ng-show="frm.unit.$invalid && frm.unit.$touched">Seleccione un departamento.</small>
							</div>
							<div class="form-group m-1" ng-class="{ 'has-error' : frm.job.$invalid && frm.job.$touched, 'has-success' : frm.job.$valid }">
								<label class="form-control-label m-0"  for="job">Puesto</label>
								<select class="form-control form-control-sm" name="job" ng-model="employee.job" ng-options="j.id as j.name for j in jobs" required>
									<option value="">-- Seleccione un Puesto --</option>
								</select>
								<small style="color:maroon; font-size:10px; font-weight:bold" ng-show="frm.job.$invalid && frm.job.$touched">Seleccione un puesto.</small>
							</div>
							<div class="form-group m-1">
								<label class="form-control-label m-0" for="employee.salary">Salario</label>  
								<input type="text" class="form-control form-control-sm" ng-model="employee.salary">
							</div>
						</div>
						<!-- <div class="col" ng-hide="true">
							<div class="form-group m-0" ng-hide="canEditUser">
								<label class="form-control-label m-0"  for="estado">Estado</label>
								<select class="form-control form-control-sm" name="isActive" ng-model="employee.isActive" required ng-disabled="canEditUser">
									<option value="1">Activo</option>
									<option value="0">Inactivo</option>
								</select>
							</div>
							<div class="form-group m-0" ng-class="{ 'has-error' : frm.academicLevel.$invalid && frm.academicLevel.$touched, 'has-success' : frm.academicLevel.$valid }">
								<label class="form-control-label m-0"  for="academicLevel">Nivel Académico</label>
								<select class="form-control form-control-sm" name="academicLevel" ng-model="employee.academicLevel" ng-options="al.id as al.name for al in academimcLevels" required>
									<option value="">-- Seleccione un Nivel Académico --</option>
								</select>
								<small style="color:maroon; font-size:10px; font-weight:bold" ng-show="frm.academicLevel.$invalid && frm.academicLevel.$touched">Seleccione un Nivel Académico.</small>
							</div>
							<div class="form-group m-0" ng-class="{ 'has-error' : frm.job.$invalid && frm.job.$touched, 'has-success' : frm.job.$valid }">
								<label class="form-control-label m-0"  for="job">Puesto</label>
								<select class="form-control form-control-sm" name="job" ng-model="employee.job" ng-options="j.id as j.name for j in jobs" required>
									<option value="">-- Seleccione un Puesto --</option>
								</select>
								<small style="color:maroon; font-size:10px; font-weight:bold" ng-show="frm.job.$invalid && frm.job.$touched">Seleccione un puesto.</small>
							</div>
						</div> -->
					</div>
				</form>
			</div>
			<div class="modal-footer">
				<button class="btn btn-default btn-outline btn-xs pull-right " ng-click="saveEmployee(employee)" ng-disabled="!frm.$valid"><i class="fa fa-send m-1"></i><span>Guardar</span></button>
				<button type="button" class="btn btn-secondary btn-xs" data-dismiss="modal">Cancelar</button>
			</div>
		</div>
	</div>
</div>